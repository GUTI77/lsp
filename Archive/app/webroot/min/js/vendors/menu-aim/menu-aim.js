!function(){define([],function(){!function(a){function b(b){var c=a(this),d=null,e=[],f=null,g=null,h=null,i=a.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:a.noop,exit:a.noop,activate:a.noop,deactivate:a.noop,exitMenu:a.noop,exitTimeout:0,afterExitMenu:a.noop},b),j=3,k=300,l=function(a){e.push({x:a.pageX,y:a.pageY}),e.length>j&&e.shift()},m=function(){g&&clearTimeout(g),i.exitMenu(this)&&(h=setTimeout(function(){d&&i.deactivate(d),d=null,i.afterExitMenu()},i.exitTimeout))},n=function(){g&&clearTimeout(g),h&&clearTimeout(h),i.enter(this),r(this)},o=function(){i.exit(this)},p=function(){q(this)},q=function(a){a!=d&&(d&&i.deactivate(d),i.activate(a),d=a)},r=function(a){var b=s();b?g=setTimeout(function(){r(a)},b):q(a)},s=function(){function b(a,b){return(b.y-a.y)/(b.x-a.x)}if(!d||!a(d).is(i.submenuSelector))return 0;var g=c.offset(),h={x:g.left,y:g.top-i.tolerance},j={x:g.left+c.outerWidth(),y:h.y},l={x:g.left,y:g.top+c.outerHeight()+i.tolerance},m={x:g.left+c.outerWidth(),y:l.y},n=e[e.length-1],o=e[0];if(!n)return 0;if(o||(o=n),o.x<g.left||o.x>m.x||o.y<g.top||o.y>m.y)return 0;if(f&&n.x==f.x&&n.y==f.y)return 0;var p=j,q=m;"left"==i.submenuDirection?(p=l,q=h):"below"==i.submenuDirection?(p=m,q=l):"above"==i.submenuDirection&&(p=h,q=j);var r=b(n,p),s=b(n,q),t=b(o,p),u=b(o,q);return t>r&&s>u?(f=n,k):(f=null,0)};c.on("mouseleave.menuaim",m).find(i.rowSelector).on("mouseenter.menuaim",n).on("mouseleave.menuaim",o).on("click.menuaim",p),a(document).mousemove(l)}a.fn.menuAim=function(a){return this.each(function(){b.call(this,a)}),this}}(jQuery)})}();