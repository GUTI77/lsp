!function(){define(["jquery","utilities/global"],function applicationController(){var _util=window.LSP.utilities,application=function(){var _this={},_app=window.LSP,_assets=_app.assets,_context,_isReadyFired=!1,_hasPushState=!(!window.history||!history.pushState),_state={},_isPushingState,_defferedScriptCount=0;return _this={events:{application:{onStateChange:function(){$("html").attr("data-path",document.href+"-END")},onResize:function(a,b){var c=b.controller?b.controller:_this,d=_context,e=_this.getContext();e!==d&&(console.log("Leaving "+d+" entering "+e),$(c).triggerHandler("onContextChange",{context:e,previousContext:d}),$(c).triggerHandler(_util.camelCase("onContextChangeLeave-"+d),{context:e,previousContext:d}),$(c).triggerHandler(_util.camelCase("onContextChangeEnter-"+e),{context:e,previousContext:d}))},onAttachEvents:function(a,b){_util.loader.load(b.selector),$("*[data-action]:not([data-action-handled])",b.selector).each(function(a,b){b=$(b);var c,d=b.data("action"),e=b.data("asset"),f=b.data("controller"),g=!1;switch(f||(console.log("Loading parentals"),f=b.parents("*[data-controller]:first").data("controller")),$(b)[0].nodeName.toUpperCase()){case"FORM":c="submit",g=!0;break;case"INPUT":case"SELECT":c="change";break;case"BUTTON":g=!0,c="click";break;default:c="click"}f&&d&&!e?b.on(c,{preventDefault:g},function(a){console.log("Event : "+f+".events."+_util.camelCase("on-"+d)+" fired."),$(_app.controllers[f]).triggerHandler(_util.camelCase("on-"+d),{selector:b,originalEvent:a}),a.data.preventDefault&&a.preventDefault()}):f&&d&&e&&b.on(c,{preventDefault:g},function(a){console.log("Event : "+f+".events."+_util.camelCase("on-"+d)+" fired."),$(_app.controllers[f].assets[e]).triggerHandler(_util.camelCase("on-"+d),{selector:b,originalEvent:a}),a.data.preventDefault&&a.preventDefault()})}),require(["vendors/unveil/unveil-min"],function(a){return function(){$("*[data-src]:not([data-lazy-handled])",a.selector).attr("data-lazy-handled",!0).unveil(200)}}(b))},onReady:function(e,data){_isReadyFired=!0,_this.attachEvents($("html")),_this.hasPushState()&&history.replaceState(!0,"page",document.URL);var requestNextScript=function(){var script=$('script[type="text/javascript/defer"]')[0];script&&(script=$(script),script.attr("src")?($.ajaxSetup({cache:!0}),$.getScript(script.attr("src"),function(){requestNextScript()}),script.remove(),$.ajaxSetup({cache:!1})):(eval("with(window){ "+script.html()+"}"),script.remove(),requestNextScript()))};if(requestNextScript(),navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)){var viewportmeta=document.querySelector('meta[name="viewport"]');viewportmeta&&(viewportmeta.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0",document.body.addEventListener("gesturestart",function(){viewportmeta.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"},!1))}},onInit:function(){_state=_this.pullState()}}},assets:{},getContext:function(){var a,b=$(window).width();return a=b>=1200?"largeDesktop":b>979?"desktop":b>=768?"tablet":"phone",_context=a},getFilename:function(){return document.location.pathname.replace(/^.*(\\|\/|\:)/,"")},attachEvents:function(a){$(_this).triggerHandler("onAttachEvents",{selector:a})},createHandlerBridge:function(a,b,c){return function(){$(a).triggerHandler(_util.camelCase("on-"+b),{selector:this,passthrough:c})}},hasPushState:function(){return _hasPushState},pushState:function(a,b,c){var d=_this.buildStateString(a,b);_this.hasPushState()?(c?(console.log("Replacing State"),history.replaceState(!0,"",("/"+b.path).replace(/\/$/,"")+"/#"+d)):(history.pushState(!0,"",document.location.origin+("/"+b.path).replace(/\/$/,"")+"/#"+d),$("html").attr("data-path",document.location.origin+("/"+b.path).replace(/\/$/,"")+"/#"+d+"-END")),$("html").attr("data-path",document.location.href)):c||window.location.hash==="#"+d||(_isPushingState=!0,window.location.hash=d)},buildStateString:function(a,b){var c="";return _state[a.name]=b,$.each(_state,function(a,b){c=c+"/~"+encodeURIComponent(a),$.each(b,function(a,b){"path"!==a&&(b="object"==typeof b&&b.hasOwnProperty("value")&&b.hasOwnProperty("uriEncode")?b.value:"object"==typeof b?encodeURIComponent(JSON.stringify(b)):encodeURIComponent(b).replace(/%20/g,"+"),b.length>0&&(c+="/"+encodeURIComponent(a)+"/"+b))})}),c},parseStateFromHash:function(a){var b=a.replace(/\?.*/,""),c=b.split("/~"),d={};return $.each(c,function(a,b){for(var c=b.split("/"),e=c[0],f=1;f<c.length;f+=2){d[e]=d[e]||{},d[e][c[f]]=decodeURIComponent(c[f+1]).replace(/\+/g," ");try{var g=$.parseJSON(d[e][c[f]]);d[e][c[f]]=g}catch(h){}}}),d},pullState:function(a){var b=_this.parseStateFromHash(window.location.hash);return a?b[a.name]:b},_createGlobalEventObject:function(){return eventData={filename:_this.getFilename(),queryParameters:_util.getURLParameters(),context:_this.getContext()}},initializeGlobalEvents:function(){var a=_this._createGlobalEventObject();$(window).resize(function(){var b;return function(){b&&clearTimeout(b),b=setTimeout(function(){$(_this).triggerHandler("onResize",a)},100)}}()),_this.hasPushState()&&$(window).on("popstate",function(){history.state&&($(_this).triggerHandler("onStateChange",a),$(_this).triggerHandler("onAfterStateChange",a))}),$(window).on("hashchange",function(b){return _isPushingState?void(_isPushingState=!1):(_isPushingState=!1,a.error=b,$(_this).triggerHandler("onStateChange",a),void $(_this).triggerHandler(_util.camelCase("on-"+a.filename+"-state-change"),a))}),$(document).ready(function(b){a.error=b,$(_this).triggerHandler("onResize",a),$(_this).triggerHandler("onReady",a),$(_this).triggerHandler("onAfterReady",a)})},init:function(a){console.log("Initializing Controller",a),console.time("Initializing Events for "+a.name);var b,c,d,e,f;for(b in _app.controllers){e=_app.controllers[b];for(c in e.events){f=_app.controllers[c];for(d in e.events[c])(a&&(a===e||a===f)||!a)&&$(f).bind(d,function(a,b,c){return function(d,e,f,g){a.events[b][c](d,e,f,g)}}(e,c,d))}a===e&&_isReadyFired&&setTimeout(function(){((e.events||{}).application||{}).onReady&&e.events.application.onReady({},_this._createGlobalEventObject()),((e.events||{}).application||{}).onAfterReady&&e.events.application.onAfterReady({},_this._createGlobalEventObject()),((e.events||{}).application||{}).onAttachEvents&&e.events.application.onAttachEvents({},$.extend({selector:$("html")},_this._createGlobalEventObject())),((e.events||{}).application||{}).onResize&&_this.events.application.onResize({},{controller:e})},100)}$(a).triggerHandler("onInit"),console.timeEnd("Initializing Events for "+a.name)}}}();_util.register("controller","application",application),console.time("Application Initialize"),window.LSP.controllers.application.initializeGlobalEvents()})}();