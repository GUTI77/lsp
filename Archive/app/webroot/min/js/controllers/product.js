!function(){define(["utilities/global","controllers/application","models/easyask","vendors/jqzoom/jqzoom"],function(){var a=window.LSP.utilities,b=function(){var b={},c=window.LSP,d=(c.assets,c.models.easyask);return b={events:{product:{onAddToCart:function(c,d){b.updateProduct(d.selector),d.selector[0].submit(),_gaq.push(["_trackEvent","product",a.camelCase("addToCart-"+b.getProductContext(d.selector)),$(".productName",d.selector.parents(".entry")).text()])},onMatrixOptionSelect:function(c,d){$('option[value=""]',d.selector).remove(),b.updateMatrixLists(d.selector[0].form,d.selector),_gaq.push(["_trackEvent","product",a.camelCase("selectMatrixOption-"+b.getProductContext(d.selector)),$(".productName",d.selector.parents(".entry")).text()])},onAddToWishlist:function(c,d){var e=d.selector.parents("form");b.updateProduct(e),require(["controllers/wishlist"],function(){addToWishlist({customer:$('input[name="customer"]',e).val(),item:$('input[name="buyid"]',e),site:"lonestarpercussion",options:$(".shopping.section select",e),qty:$('.shopping.section input[name="qty"]',e),messages:$(".wishlist-messages > div",e)}),_gaq.push(["_trackEvent","product",a.camelCase("addToWishlist-"+b.getProductContext(e)),$(".productName",e.parents(".entry")).text()])})},onVerifyGiftCardAmount:function(b,d){var e=c.controllers.validation.validateForm(d.selector[0].form),f=$('input[name="amount"]'),g=parseInt(f.val(),10)||0;1e3>=g&&g>1?(f.parent().addClass("validation-container").removeAttr("data-validation-invalidtypes"),e&&f[0].form.submit()):(f.parent().addClass("validation-container").attr("data-validation-invalidtypes","overGiftCardAmount"),a.scrollTo(f))}},application:{onContextChange:function(a,c){c.previousContext&&b.attachZoom(c.context)},onReady:function(a,c){var d=$('.page-product form[action="/app/site/backend/additemtocart.nl"]')[0];d&&b.renderMatrixLists(d),setTimeout(b.removeEmptySpecificationsRows,500),b.attachZoom(c.context)},onInit:function(){}}},assets:{},getProductContext:function(a){var b=$(a).parents('[class*="page-"]').attr("class").split(" ");return b[0].indexOf("page-")>-1?b[0].replace("page-",""):"unknown"},attachZoom:function(a){if($.jqzoom){b.detachZoom();var c=$('a[data-asset="mouseoverZoom"]');c.is(':not([href*="no-image"])')&&"phone"!==a?(c.jqzoom({zoomWidth:$(".addToCart").width(),zoomHeight:480,position:"right",preloadImages:"phone"!==a?!0:!1,xOffset:"phone"===a?1e3:parseInt($(".information.span6").css("margin-left"),10),yOffset:-20,zoomType:"standard",showEffect:"fadein",fadeinSpeed:"fast",delay:100}),require(["vendors/unveil/unveil-min"],function(){$("*[data-src]:not([data-lazy-handled])").attr("data-lazy-handled",!0).unveil(200)})):$("a[href*=no-image]").removeAttr("href")}},detachZoom:function(){$(".zoomWindow").remove(),$(".zoomPup").remove(),$(".zoomPreload").remove(),$(".zoomPad img").unwrap();var a=$(".section.images").html();$(".section.images").empty().html(a)},removeEmptySpecificationsRows:function(){$("tr[data-specifications-data]").filter(function(){var a=$(this).attr("data-specifications-data").toLowerCase();return""===a.replace(/[^A-Za-z0-9]/,"")||"!empty!"===a||"!empty!"===a||"!none!"===a||"none"===a||"!unknown!"===a||"!needspec!"===a||"!required!"===a}).remove()},renderMatrixLists:function(){},updateMatrixLists:function(a,c){var e=c.parents(".entry"),f=d.parseMatrixChildren($('div[data-name="summaryString"]',e).data("value")),g={};$("select",e).each(function(a,b){$(b).val().length&&(g[$(b).attr("name")]=$(b).val())});var h=d.filterMatrixChildren(f,g),i=$('option[value=""]:first',e).text();$.each(h,function(b,c){var d='<option value="">'+i+"</option>";$.each(c,function(a){d+='<option value="'+a+'" '+(g[b]===a?"selected":"")+">"+a+"</option>"}),$('select[name="'+b+'"]',a).html(d)}),b.updateProduct(e)},updateProduct:function(e){var f=d.parseMatrixChildren($('div[data-name="summaryString"]',e).data("value")),g={},h=$("select",e).each(function(a,b){g[$(b).attr("name")]=unescape($(b).val())});h.length&&($("button.b1",e).attr("disabled",!0),$('input[name="buyid"]',e).val(""),$('input[name="itemid"]',e).val(""),$.each(f.products,function(d,f){var h;for(h in f.options)if(!g[h]||g[h]!==f.options[h])return;b.detachZoom(),$('input[name="buyid"]',e).val(d),$('input[name="itemid"]',e).val(d),$('input[name*=".id"]',e).val(d),$("button.b1",e).removeAttr("disabled"),f.data.msrp-f.data.onlinePrice<=0?$(".price .details",e).hide():$(".price .details",e).show(),$(".productMsrp",e).html(a.parseCurrency(f.data.msrp)),$(".productPrice",e).html(a.parseCurrency(f.data.onlinePrice)),$(".productMpn",e).html(f.data.mpn),$(".productDiscount",e).html(a.parseCurrency(f.data.msrp-f.data.onlinePrice));var i=[];for(h in f.options)f.options.hasOwnProperty(h)&&i.push(f.options[h]);$(".productName .options",e).html(" : "+i.join(", "));{var j=$(".thumbnail img, #zoom-mainImage img, img.thumbnail",e).width(),k=$(".thumbnail img, #zoom-mainImage img, img.thumbnail",e);$("#zoom-mainImage").attr("href",f.data.imageUrl)}k.attr("src",f.data.imageUrl+"."+j+"x"+j),$(".productAvailability",e).html(f.data.stockMessage),$(e).attr("data-stockmessage",f.data.stockMessage),b.attachZoom(c.controllers.application.getContext()),$(".productName *[data-badge], .details *[data-badge]",e).removeClass("badges-hasBadge").attr("data-badge",f.data.specialFeature),$(".thumbnail[data-badge], #zoom-mainImage[data-badge]",e).removeClass("badges-hasBadge").attr("data-badge",f.data.waysToSave),$(".productName *[data-badge] .badges-badge, .thumbnail[data-badge] .badges-badge, .details *[data-badge] .badges-badge",e).remove(),c.controllers.application.attachEvents(e)}))},getSpecifications:function(a){return d.request(b,"getSpecifications","getSpecifications",{id:a})},getMatrixOptions:function(a){return d.request(b,"get","getMatrixOptions",{parentId:a})}}}();a.register("controller","product",b)})}();