!function(){define(["utilities/global","controllers/application"],function(){var a=window.LSP.utilities,b=function(){var b={},c=window.LSP,d=c.models.netsuite,e={sluglessSelector:"*[data-def]:not([data-definitions-slug]):not([data-definitions-definition])",definitionlessSelector:"*[data-def][data-definitions-slug]:not([data-definitions-definition])",parsedSelector:"*[data-def][data-definitions-definition]"};return b={name:"definitions",events:{definitions:{onAfterAPICallFailure:function(){$("*[data-def]").removeAttr("data-def")}},application:{onAttachEvents:function(a,c){var d=[];$(e.sluglessSelector,c.selector).each(function(){$(this).attr("data-definitions-slug",b.makeSlug($(this).html()))}),$(e.definitionlessSelector,c.selector).each(function(){d.push($(this).attr("data-definitions-slug"))}),$.when(b.getDefinitions(d)).done(function(a){a&&a.response&&a.response.data&&b.parseDefinitions(a.response.data,c.selector)})}}},assets:{},getDefinitions:function(a){return a.length>0?d.request(b,"getDefinitions",{method:"getDefinitions",slugs:JSON.stringify(a)}):void 0},parseDefinitions:function(c,d){$(e.definitionlessSelector,d).each(function(){for(var d=0;d<c.length;d++)if(c[d].custrecordslug===$(this).data("definitions-slug")){var e=$(this);e.attr("data-definitions-title",c[d].name).attr("data-definitions-definition",c[d].custrecorddefinition).attr("data-definitions-url",c[d].custrecordurl).attr("data-definitions-imageurl",c[d].custrecordimageurl),e.append(a.parseMicroTemplate("templates-definitons-display",e.data())),e.bind("mouseenter",function(){b.showDefinition(this)}).bind("mouseleave",function(){b.hideDefinition(this)}).bind("click",function(){b.toggleDefinition(this)})}})},hideDefinition:function(a){$(".panel",a).hide()},showDefinition:function(a){$(".panel",a).show()},toggleDefinition:function(a){$(".panel",a).is(":visible")?$(".panel",a).hide():$(".panel",a).show()},makeSlug:function(a){return a.toLowerCase().replace(/[ ]+/g,"-").replace(/[^\w\-]/g,"")}}}();a.register("controller","definitions",b)})}();