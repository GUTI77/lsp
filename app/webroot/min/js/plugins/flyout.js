!function(){define(["jquery","utilities/global","controllers/application","plugins/reveal","vendors/menu-aim/menu-aim"],function(){var a=window.LSP.utilities;a.register("controller","flyout",function(){var b,c,d,e,f,g={},h=window.LSP,i=!1,j=!1,k=!1,i=!1,l=!1,m=!1,n=!1,o=h.controllers.reveal,p=150,q=500,r=250;return g={name:"flyout",events:{application:{onContextChangeLeavePhone:function(){g.attachMenu()},onContextChangeEnterPhone:function(){g.detachMenu()},onAfterReady:function(){"phone"!==h.controllers.application.getContext()&&g.attachMenu()}}},assets:{},attachMenu:function(){c=$("#flyoutControlButton"),b=$("#mainFlyout"),d=$("#mainFlyout .topLevel"),o&&o.unbindEvents(d),d.menuAim({activate:g.showRow,deactivate:g.hideRow,exitTimeout:q,exitMenu:function(){return!0},afterExitMenu:function(){i=!1,k=j,clearTimeout(f)}});var a,e;c.off(".flyout").on("mouseenter.lsp.flyout",function(){i||m||(e=setTimeout(g.openFlyout,r))}).on("mouseleave.lsp.flyout",function(){clearTimeout(e)}).on("click.lsp.flyout",function(){l=!i,m=!l,n=!0,g.toggleFlyout(),m&&setTimeout(function(){m=!1},800)}),$(".topLevel").off(".flyout").on("click.lsp.flyout",function(a){c.click(),a.stopPropagation()}),$(".topLevel li").off(".flyout").on("click.lsp.flyout",function(a){a.stopPropagation()}),$(".container",b).on("mouseenter.lsp.flyout",function(){clearTimeout(a)}),$(".wrapper",b).bind("mouseleave.lsp.flyout",function(b){n||(a=setTimeout(g.closeFlyout,q),clearTimeout(f)),n=!1,b.stopPropagation()}),$(this).triggerHandler("onAfterAttach",{selector:b})},detachMenu:function(){b&&(g.closeFlyout(),$("*",b).off(".menuaim"),c.off(".flyout"),$(".wrapper",b).off(".flyout")),o&&o.bindEvents(d)},openFlyout:function(d){j=d||!1,k=j,i=!0,b&&(b.addClass("active"),c.addClass("active"),a.scrollTo($(".collection:first-child",b)))},closeFlyout:function(a){b?(clearTimeout(f),i=!1,a&&(j=!1,k=!1),j||(b.removeClass("active"),c.removeClass("active"),$("li.collection.active",b).removeClass("active"),e&&$(e.elem).stop(!0,!0),e=null,i=!1)):h.controllers.reveal.close($("#mainFlyout, #mainFlyout *[data-reveal-children]"),!1)},toggleFlyout:function(){i?g.closeFlyout():g.openFlyout()},showRow:function(a,c){if(j&&k&&!c)clearTimeout(f),f=setTimeout(function(){g.showRow(a,!0)},r);else{if(a=$(a),k=!1,!i){var d=$(".flyout",a);if(e)$(e.elem).removeAttr("style"),$(d[0]).css({width:e.now,overflow:"hidden"}),e.elem=d[0];else{var h=d.outerWidth();d.css({width:0}).animate({width:h},{duration:p,easing:"swing",step:function(a,b){e=b},always:function(){$(".flyout[style]",b).css({width:""}),e=null,i=!0}})}}a.addClass("active"),a.unveil&&$("*[data-src]",a).unveil()}},hideRow:function(a){$(a).removeClass("active")}}}())})}();