!function(){define(["utilities/global","controllers/application"],function(){var a=window.LSP.utilities,b=function(){var b={},c=window.LSP,d=c.models.api,e={bodyNoTrackingNumbersFoundClass:"shipping-noTrackingNumbersFound",trackingNumberSelector:".testOnly-trackingNumbers"};return b={name:"shipping",events:{application:{onAttachEvents:function(){$("form#shipping-inputForm").bind("submit",function(a){return a.preventDefault(),!1}).bind("afterValidation",function(){b.submit(a.formToObject(this,null,!1))})}}},assets:{},submit:function(a){"1Z"===a.search.substr(0,2).toUpperCase()?b.redirectToUPS(a.search):(b.clearTrackingNumbers(),$.when(b.requestTrackingNumber(a.search,a.emailAddress)).done(function(a){b.getTrackingData(((a.response.data||{}).trackingnumbers||"").toUpperCase())}))},getTrackingData:function(a){if(0!==a.length)for(var c=a.split(" "),d=0;d<c.length;d++)$.when(b.requestTrackingData(c[d])).done(function(a){b.displayTrackingData(a.response.data)}).fail(function(){$("body").addClass(e.bodyNoTrackingNumbersFoundClass)});else $("body").addClass(e.bodyNoTrackingNumbersFoundClass)},clearTrackingNumbers:function(){$(e.trackingNumberSelector).html(""),$("body").removeClass(e.bodyNoTrackingNumbersFoundClass)},displayTrackingData:function(a){console.log(a),$(e.trackingNumberSelector).append(JSON.stringify(a))},requestTrackingNumber:function(a,c){return d.request(b,"getTrackingNumber","getTrackingNumber",{salesOrderNumber:a.replace(/[^0-9]+/,""),emailAddress:$.trim(c)})},requestTrackingData:function(a){return d.request(b,"getUPSTrackingData","getUPSTrackingData",{trackingNumber:a})}}}();a.register("controller","shipping",b)})}();