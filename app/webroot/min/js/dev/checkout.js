!function(){define(["utilities/global","controllers/application"],function(){var a=window.LSP.utilities;a.register("controller","checkout",function(){var a={},b=window.LSP,c=(b.assets,b.models.cart,b.utilities),d=[];return a={events:{checkout:{onLogin:function(){console.log("Login"),a.proceedTo("shipping"),a.updateCart(),a.updateShippingMethods()},onLoginAsGuest:function(){console.log("Login as Guest"),a.proceedTo("shipping"),a.updateCart(),a.updateShippingMethods()},onApplyPromoCode:function(){console.log("Apply Promo Code")},onApplyGiftCard:function(){console.log("Apply Gift Card"),a.updateCart()},onUpdateShippingMethod:function(){a.updateCart()},onUpdateZipcode:function(){a.hasChosenShippingMethod()?$.when(a.updateShippingMethods()).done(function(){a.updateCart()}):a.updateShippingMethods()},onUpdateCountry:function(){a.updateShippingMethods()},onUpdateBillingAddress:function(){console.log("Update Billing Address")},onSaveShipping:function(){console.log("Save Shipping"),$.when(a.saveShippingData()).done(function(d){var e=c.parseMicroTemplate("templates-shipping-summary",d);$("#shippingSummary").html(e),b.controllers.application.attachEvents($("#shippingSummary")),a.toggleStepVisability("shipping"),a.proceedTo("billing")})},onEditShipping:function(){$("#shippingSummary").addClass("hide"),a.toggleStepVisability("shipping")},onSaveBilling:function(){console.log("Save Billing"),$.when(a.saveBillingData()).done(function(d){var e=c.parseMicroTemplate("templates-billing-summary",d);$("#billingSummary").html(e),b.controllers.application.attachEvents($("#billingSummary")),a.toggleStepVisability("billing"),a.proceedTo("review")})},onEditBilling:function(){$("#billingSummary").addClass("hide"),a.toggleStepVisability("billing")},onFinishOrder:function(){console.log("Finish Order")}},application:{onAttachEvents:function(){},onReady:function(){},onInit:function(){}}},assets:{},proceedTo:function(a){if($.inArray(a,d)<0)switch(d.push(a),$(".steps .active").removeClass("active"),$(".steps ."+a).addClass("active completed"),a){case"shipping":$("#shippingInputPanel").removeClass("hide"),$("#loginPanels").addClass("hide");break;case"billing":$("#billingInputPanel").removeClass("hide"),$('button[data-action="saveShipping"]').html("Save Shipping"),$('button[data-action="saveShipping"].hide').removeClass("hide");break;case"review":$('button[data-action="saveBilling"]').html("Save Billing"),$('button[data-action="finishOrder"]').removeClass("hide"),$('button[data-action="saveBilling"].hide').removeClass("hide"),$(".advertisement").addClass("hide")}},toggleStepVisability:function(a){var b=$("#"+a+"InputPanel"),c=$("#"+a+"Summary");b.hasClass("hide")?(b.removeClass("hide"),c.addClass("hide"),$('button[data-action="finishOrder"]').addClass("hide")):(b.addClass("hide"),c.removeClass("hide"),$("#shippingInputPanel").hasClass("hide")&&$("#billingInputPanel").hasClass("hide")&&$('button[data-action="finishOrder"]').removeClass("hide"))},showLoading:function(){console.log("Loading"),$(".page-checkout").addClass("loading")},hideLoading:function(){console.log("Not Loading"),$(".page-checkout").removeClass("loading")},hasChosenShippingMethod:function(){return $('#checkoutForm input[name="shipping.method"]').is(":checked")},saveShippingData:function(){a.showLoading();var b=$.Deferred(),d=c.formToObject($("#checkoutForm")[0],null,!1);return $.when().done(function(c){c=d,a.hideLoading(),b.resolve(c)}),b.promise()},saveBillingData:function(){a.showLoading();var b=$.Deferred(),d=c.formToObject($("#checkoutForm")[0],null,!1);return $.when().done(function(c){c=d,a.hideLoading(),b.resolve(c)}),b.promise()},updateCart:function(){console.log("Update Shipping Amount In Cart, re-render summary");{var b=$.Deferred();c.formToObject($("#checkoutForm")[0],null,!1)}return $.when().done(function(){var c={totals:{merchandise:{value:14},shipping:{method:"Standard Shipping",value:10},tax:{value:15},total:{value:16}},products:[{title:"this is a product title",quantity:3,mpn:"IP240",extendedPrice:22,options:"Red Sparkle Finish, Chrome Hardware",status:{description:"Ships Seperately",slug:"seperately"}},{title:"this is a product title",quantity:3,mpn:"IP240",extendedPrice:22,options:"Red Sparkle Finish, Chrome Hardware",status:{description:"Ships Seperately",slug:"seperately"}}]};a.renderCartSummary(c),b.resolve(c)}),b.promise()},renderCartSummary:function(a){var d=c.parseMicroTemplate("templates-checkout-summary",a);$("#checkoutSummary").html(d),b.controllers.application.attachEvents($("#checkoutSummary"))},updateShippingMethods:function(){var b=$.Deferred();return $.when().done(function(){var c=[{title:"Standard Shipping",delay:"3-5 days",arrivesBy:"Tuesday",amount:13.23},{title:"Express Shipping",delay:"2-3 days",arrivesBy:"Saturday",amount:13.23},{title:"Overnight Shipping",delay:"1-2 days",arrivesBy:"Thursday",amount:13.23}];a.renderShippingMethods(c),b.resolve(c)}),b},renderShippingMethods:function(a){var d=c.parseMicroTemplate("template-checkout-shippingMethods",a);$("#shippingMethods").html(d),b.controllers.application.attachEvents($("#shippingMethods"))}}}())})}();