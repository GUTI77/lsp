!function(){define(["utilities/global","controllers/application"],function(){var a=window.LSP.utilities;a.register("controller","checkout",function(){var a={},b=window.LSP,c=(b.assets,b.utilities),d={},e="body .span12 > table";return a={events:{checkout:{onInit:function(){LSP.config=LSP.config||{},a.setPage(LSP.config.setPage)},onEnterCart:function(){var a;$('a[href="#"]').attr("href",null),$('input[name="checkout"]').attr("formnovalidate",!0).click(function(){setTimeout(function(){clearTimeout(a)},1e3)}).parent().click(function(){a=setTimeout(function(){_gaq.push(["_trackEvent","cart","error","5 seconds have passed since clicking proceed to checkout"])},5e3)})},onEnterRegister:function(){},onEnterAddress:function(){a.setPage($(".greytitle").is(':contains("Shipping")')?"shippingAddress":"billingAddress")},onEnterShippingAddress:function(){$(e+" > tbody > tr > td > table > tbody > tr.portletHandle:first-child + .noprint + .portletHandle:not(:has(#address))").css({height:"0px",visibility:"hidden"})},onEnterBillingAddress:function(){},onEnterShippingMethod:function(){$("#kReferralCode, #applycoupon").attr("tabindex",-1)},onEnterPayment:function(){$('input[name="gc"], #applygift').attr("tabindex",-1),$("#stepSlider").prependTo(".page-generic:first").wrap('<table><tr height="25"><td></td></tr></table>'),$("#paymeth > table").parent().parent().addClass("row-fluid"),$("#paymeth > table").addClass("span8").attr("style",""),$('<div class="span4 rightColumn pull-right"><div class="orderSummary"></div>').insertBefore("#paymeth > table"),$(".cart").prependTo(".orderSummary"),$('.adForPaymentPage *[class*="bsa-"]').appendTo(".rightColumn").parent().removeClass("hide"),0==$(".newGiftCardRow").length&&$('<tr class="newGiftCardRow"><td class="smalltextnolink" align="right" style="padding-top:10px;"><input id="giftCardCheckbox" type="checkbox" style="float:right;position:relative;top:10px;" onclick="window.toggleGiftCard()"></td><td style="padding-top:20px;">Do you have a gift card?<div class="details">Redeeming a Gift Card is easy!</div></tr>').insertBefore('input[name="sIssueNo"]'),$('td:contains("Apply a Gift Card"):last').attr("style","visibility: hidden;"),$('.greytitle:contains("Gift Card"):last').attr("style","display: none !important;").parent().prev().attr("style","display: none !important;"),$('tr:contains("Apply a Gift Card"):last').addClass("giftCardRow"),$('tr:contains("If you have a gift card"):last').attr("style","display: none !important;"),$('input[name="sValidFromYr"] ~ tr:contains("Invalid"):last table').attr("style","margin: 20px 5px 10px 160px;"),window.toggleGiftCard=function(){$("#giftCardCheckbox").is(":checked")?($(".giftCardRow").attr("style",""),$("#giftCardCheckbox").prop("checked",!0)):$(".giftCardRow").attr("style","display: none !important;")},window.toggleGiftCard(),$('input[name="gc"]').val().length>0&&($(".giftCardRow").show(),$('tr:contains("Do you"):last').attr("style","display: none !important;")),$('tr:contains("For most credit"):last').attr("style","display: none !important;"),0==$('.notice:contains("You will")').length&&$('<div class="notice" style="position: absolute;bottom: -110px;height: 100px;">You won&#39;t be charged yet<span class="details">You will review and place your order on the next page</span></div>').prependTo("#paymeth > table > tbody > tr:nth-child(3) > td > table > tbody > tr > td")},onEnterReview:function(){},onEnterThankYou:function(){var a=$(e+" > tbody > tr > td > table > tbody > tr > td > table > tbody > tr > td > table > tbody > tr > td > table > tbody > tr:first-child + tr > td > table,#checkout table table table > tbody > tr:first-child + tr > td > table:not(.texttable table)").attr("id","carttable");$("> tbody > tr:first-child",a).attr("id","carttableheader"),$("> tbody > tr:first-child ~ tr",a).not("tr[id]").each(function(a,b){$(b).attr("id","carttablerow"+a)}),$("#ordersummary_total .texttablert:first-child b").text("Total"),$(e).addClass("nscheckout-receipt"),_gaq.push(["_trackTrans"])},onEnter:function(a,c){try{$('input[name*="email"]:not([type="checkbox"])').attr("type","email"),$('input[name*="zip"], input[name*="phone"], input[name*="sCardNum"], input[name*="ccsecuritycode"]').attr("type","tel"),$("input:not([type])").attr("type","text"),b.controllers.netsuite.attachEnterKey()}catch(a){}"address"!==c.pageName&&(_gaq.push(["_set","title","Checkout - "+c.pageName]),_gaq.push(["_trackPageview","/checkout/"+c.pageName]))}},application:{onAttachEvents:function(){},onReady:function(){},onInit:function(){}}},assets:{},setPage:function(b){d.page=b,console.log("Firing Page Event : "+c.camelCase("on-enter-"+b)),$(a).triggerHandler(c.camelCase("on-enter"),{selector:$(document),pageName:b}),$(a).triggerHandler(c.camelCase("on-enter-"+b),{selector:$(document)}),$(e).addClass("nscheckout-"+b)}}}());for(var b=0;b<(((LSP.config||{}).checkout||{}).page||[]).length;b++)LSP.controllers.checkout.setPage(LSP.config.checkout.page[b])})}();