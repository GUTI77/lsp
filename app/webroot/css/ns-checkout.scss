// This file contains CSS nessesary only for native netsuite cart and checkout
// It should be expected that this file will eventually disapear

// #carttable{
// 	outline: 1px solid green;
// }

// input[name="new"] + input[name="review"] + table{
// 	outline: 1px solid red;
// }

// #newcust{
// 	outline: 1px solid blue;
// }

// #main_form table{
// 	background-color: purple;
// }

@mixin panel(){
	@include box-shadow-multiple(0 0 px(3px) 0 $lightGrey);
	background-color: $white;
	display: inline-block;
	position: relative;
	border: 1px solid $lightGrey;
	@include border-radius(px($borderRadius));
	padding: px($paddingUnit + 3) px($paddingUnit * 2) px($paddingUnit * 2) !important;
	
	@include box-sizing();
	
	margin-bottom: 17px !important;
	color: $black;
	.greytitle{
		margin-top:6px;
		font-size: 28px;
		line-height: 28px;
		padding-bottom: 10px !important;
	}
	@include clearfix();
}

@mixin engaged(){
	border-top: px($paddingUnit) solid $yellow;
	padding-top: 5px;
}

@mixin disengaged(){
	background-color: $superLightGrey;
	padding-top: px((2 * $paddingUnit) - 2px); /* Make up for engaged's border-top */
}

body .span12 > table[border="0"][cellspacing="0"][cellpadding="0"]{
	
	position: relative;

	td{
		vertical-align: top;
	}

	@media (max-width: 767px){
		table, tr, td, tbody{
			display: block !important;
			width: 100% !important;
			padding: 0 !important;
			margin: 0 !important;
		}
	}

	#tbl_register, #tbl_cancel, #tbl_submitter, #tbl_applygift, #tbl_applycoupon, #tbl_recalc,
	#tbl_checkout{
		@include gradient($lightYellow, $darkYellow);
		@include box-shadow-multiple(0 1px 1px 0 #fdf8a6 inset, 0 -1px 1px 0 #fdf8a6 inset);
		
		cursor: pointer;
		
		border : 1px solid $brownYellow;
		border-radius : px($borderRadius);
		color : black;
		text-shadow : 0 1px $saturatedHighlightYellow;
		font-family : 'Open Sans', sans-serif;
		font-size : px(14px);
		font-weight : 800;
		text-transform : uppercase;
		text-decoration: none;
		text-align : center;
		line-height: 1.3em;
		display: inline-block;
		margin : 0 px($paddingUnit);
		input{
			text-transform: uppercase;
			display: inline;
			border: 0;
			background-color: transparent;
			padding : px(10px, 14px) px(14px, 14px);
		}
		
		
		&:hover, &.active{
			@include gradient($hoverLightYellow, $darkYellow);
		}

	}

	 #tbl_applygift, #tbl_applycoupon, #tbl_recalc{
		@include gradient($buttonLightGrey, $buttonDarkGrey); 
		@include box-shadow-multiple(0 0 px(2px) 0 $highlightGrey inset);
		text-shadow : 0 1px $saturatedHighlightGrey;
		border : 1px solid $darkGrey;
	}


	#carttableheader, #carttableheader + tr{
		font-size: 13px;
	}

	// Cart Header
	#carttableheader td{
		border: 1px solid $lightGrey !important;
		border-right: 0 !important;
		border-left-width: 1px !important;
		padding: 10px !important;
		text-align: center;

		&:first-child{
			border-left: 0 !important;
		}

		@media (max-width: 767px){
			display: none !important;
		}
	}

	// Cart Item Rows
	// use table again to ensure we are working with
	// netsuite's nested table and not accidentally one of ours
	#carttablerow0, #carttablerow0 ~ tr{

		@media (max-width: 767px){
			border: 1px solid $lightGrey;
			border-width: 0 0 1px;
			padding: 20px 0 !important;
			position: relative;

			#carttablerow0{
				border-top-width: 1px;
			}

			@include clearfix();
		}

		td{ 
			border-bottom: 1px solid $lightGrey;
			padding: 10px;
			font-size: 13px;

			@media (max-width: 767px){
				border: 0px
			}
		}

		// Image
		td:first-child{
			img{ 
				width: 64px;
				height: 64px;
			}
			text-align: center;

			@media (max-width: 767px){
				float: left !important;
				width: auto !important;
				padding-right: 10px !important;
			}
		}

		// Item Name
		td:first-child + td{
			a{
				text-decoration: none;
				font-size: 15px;
				font-weight: 600;
				color: black;
			}
		}

		// Description
		td:first-child + td + td{
			//background-color: white;
			@media (max-width: 767px){
				color: $grey;
			}
		}

		// Options
		td:first-child + td + td + td{
			//background-color: red;
			@media (max-width: 767px){
				color: $grey;
			}
		}

		// Quantity
		td:first-child + td + td + td + td{
			min-width: 50px;

			@media (max-width: 767px){
				float: left !important;
				width: 125px !important;
				input{ width: 50px !important; }
				&:before{
					padding-top: 10px;
					padding-right: 5px;
					content: 'Quantity: ';
					float: left !important;
				}
			}
		}

		// Price
		td:first-child + td + td + td + td + td{
			//background-color: red;
			//display: none;
			//width: 1%;
			text-align: center;	
			@media (max-width: 767px){
				display: none !important;
			}
		}

		// Amount
		td:first-child + td + td + td + td + td + td{
			//background-color: red;
			text-align:right;
			font-size: 21px;
			font-weight: bold;
			width: 200%;
			@media (max-width: 767px){
				position: relative;
				top: 8px;
				font-size: 18px;
				text-align: left !important;
			}
		}

		// Remove
		td:first-child + td + td + td + td + td + td + td{
			//background-color: red;
			text-align: center;
			a{
				img{ display: none; }
				&:before{
					content: 'Remove'
				}
			}

			@media (max-width: 767px){
				a{
					position: absolute;
					top: 10px;
					right: 10px;
					text-decoration: none;

					&:before{
						content: 'x';
						color: black;
						line-height: 17px;
						text-align: center;
						font-size: 14px;
						top: 0px;
						font-weight: bold;
						margin-top: 0;
						border: 1px solid #cfcfcf;
						width: 20px;
						height: 20px;
						display: block;
						padding-left: 1px;
						@include border-radius(16px);
					}

					&:hover:before{
						background-color: red;
						color: white;
						border-color: transparent;
					}
				}
			}
		}

	}

	@media (max-width: 767px){
		#carttablerow0{
			border-top-width: 1px;
		}
	}

	// Cart Footer
	#ordersummary_estship, #ordersummary_estship ~ tr{

		@media (max-width: 767px){
	 		text-align: right !important;
	 	}

		> td.texttable[colspan="6"]{ // Overqualified to overcome selector specificity
			
			text-align: right;
			position: relative;
			color: $grey;
			padding-top: 30px;

			@media (max-width: 767px){
				display: inline-block !important;
	 			width: auto !important;
	 			float: none !important;
			}

			&:after{
				content: ' click to change';
			}
			a{
				text-decoration: none;
				font-size: 14px;
				font-weight: 600;
				color: black;
				padding-bottom: 30px;
				z-index: 1;
				top: 10px;
				display: block;
				padding-left: 100px;
				position: absolute;
				right: 10px;

				@media (max-width: 767px){
					position: static;
					padding-bottom: 0;
					&:after{
						content: ' ';
						display: block;
						position:absolute;
						width: 100%;
						right: 0;
						bottom: 0px;
						height: 20px;
						//background-color: red;
					}
				}

				&:hover{
					text-decoration: underline;
				}
			}
		}


		// Subtotal amount
		td[colspan="6"] + td.texttablert{
			font-size: 21px;
			font-weight: bold;
			text-align: right;
			vertical-align: middle;

			@media (max-width: 767px){
				display: inline-block !important;
	 			width: auto !important;
	 			float: none !important;
	 			margin-top: 10px !important;
	 			margin-right: 10px !important;
	 			width: 100px !important;
			}
		}
		@media (max-width: 767px){
			// Blank cell after subtotal
			td[colspan="6"] + td.texttablert + td{
				display: none !important;
			}
		}




	}

	#ordersummary_estship + tr td{
		border-bottom: 0;
	}
	@media (max-width: 767px){
		#ordersummary_estship + tr{

			background-color: $superLightGrey;

			// Blank cells
			td:first-child,
			td:first-child + td,
			td:first-child + td + td,
			td:first-child + td + td + td,
			td:first-child + td + td + td + td,
			td:first-child + td + td + td + td + td + td + td{
				display: none !important;
			}

			// Label
			td:first-child + td + td + td + td + td{
				display: inline-block !important;
				width: auto !important;
				padding-right: 15px !important;
			}
			// Value
			td:first-child + td + td + td + td + td + td{
				display: inline-block !important;
				width: 100px !important;
				position: static !important;
			}

		}
	}

	// The button row
	> tbody > tr > td > table > tbody > tr > td > table > tbody > tr:first-child + tr > td > table > tbody > tr > td > table{
		float: right;
		margin-top: 10px !important;
		//background-color: pink;
		

		@media (max-width: 767px){
			tr, td{
				width: auto !important;
				float: right;
			}
		}

		td{
			display: block;
			float: right !important;

		}
		#tbl_cancel{
			display: none;
		}
	}


	// Form Labels
	.smalltextnolink[align="right"]{
		font-weight: bold;
		text-align: right;
		line-height: 0;
		padding-right: 5px;
		@media (max-width: 767px){
			text-align: left;
		}

		a{ color: black; line-height: 22px; }

		// Required Icon
		.required_icon{
			//background-color: red;
			display: none
		}
		
		.required_icon + a{
			&:after{
				content: 'Required';
				color: $grey;
				display: block;
				font-weight: normal;
				//text-align: right;
				font-size: 13px;
				line-height: 18px;
				width: 100%;
				@media (max-width: 767px){
					content: ' (required)';
					display: inline;
				}
			}
		}
	}

	.smalltextnolink{
		color: black;
	}

	// Not all labels have an "a" tag
	// We need to back out of our line-height
	// fix from above
	#paymeth{
		.smalltextnolink[align="right"]{
			line-height: 22px;
		}
	}

	// Form Fields
	.smalltextnolink[align="right"] + td{
		padding-bottom: 10px !important;
	}

	.smalltext{
		color: $grey;
		font-size: 13px;
	}

	.greytitle{
		line-height: 43px;
		font-size: 2.9em;
		font-family: "League Gothic", sans-serif;
		text-transform: uppercase;
		color: $black; 
		-webkit-font-smoothing: antialiased;
		margin-top:10px;
	}


	// Customer Sign In
	> tbody > tr > td > table > tbody > tr > td > table > tbody >tr > td > input[name="new"] ~ table{
		
		
		> tbody > tr{
			display: block;
			float: left;
			width: 50% - $fluidGutterPercentage / 2;
		}

 		> tbody{
			// New Customers
			> tr:first-child{
				background-color: teal;
				@include panel();
				@include engaged();
				#tbl_register{
					margin-top: 10px;
					input{ padding-right: 0; }
					&:after{
						padding-right: 10px;
						content: ' As Guest';
					}
				}
			}
			
			// Returning Customers
			> tr:first-child + tr + tr + tr{
				margin-left: $fluidGutterPercentage;
				@include panel();
				@include disengaged();

				// Password Field
				> td > table > tbody > tr:first-child + tr > td > table > tbody > tr:first-child + tr > td:first-child + td{
					padding-bottom: 0 !important;
				}

				// Login Button
				#tbl_submitter{
					margin-top:10px;
					position: relative;
					input{ padding-right: 55px; text-indent:-150px; }
					&:after{
						position: absolute;
						left: 12px;
						top: 9px;
						content: 'Login';
					}
				}
			}


			// Blank lines between sections
			> tr:first-child + tr,
			> tr:first-child + tr + tr,
			> tr:first-child + tr + tr + tr > td > table > tbody > tr:first-child + tr + tr + tr{
				display: none !important;
			}
		}
	}

	// "Register > Address > Shipping > Payment > Review & Submit" map
	// The path to them is different on each page.. why? I have no clue.
	input[name="category"] ~ table > tbody > tr:first-child > td > table > tbody > tr:first-child,
	.portletHandle:first-child,
	> tbody > tr:first-child + tr > td > table > tbody > tr:first-child > td > table > tbody > tr:first-child > td > table > tbody > tr:first-child[height="25"] {
		background-color: orange;
		position:absolute;
		top: -50px;
		left: 0;

	}

	#paymeth > table{
		@include panel();
		@include engaged();
		
		select[name="sExpMo"],
		select[name="sExpYr"]{
			width: 100px;
		}
		select[name="sExpMo"]{
			float: left;
		}
		
		// Payment Method
		#paymethhider > table > tbody > tr:first-child + tr + tr > td:first-child{
			
			position: relative;
			top: -5px;

			&:after{
				// Not sure why I need this - but this one was too close to the radio buttons
				margin-right: 5px;
			}
			table{
				float: right;
			}
		}
		#paymethhider > table > tbody > tr:first-child + tr + tr > td:first-child,
		#paymethhider > table > tbody > tr:first-child + tr + tr + tr + tr > td:first-child,
		#paymethhider > table > tbody > tr:first-child + tr + tr + tr + tr + tr > td:first-child,
		#paymethhider > table > tbody > tr:first-child + tr + tr + tr + tr + tr + tr > td:first-child,
		#paymethhider > table > tbody > tr:first-child + tr + tr + tr + tr + tr + tr + tr + tr > td:first-child{
			//background-color: pink;
			&:after{
				content: 'Required ';
				padding-right: 5px;
				display:block;
				text-align:right;
				font-weight: normal;
				color: $grey !important;
				font-size: 13px;
				line-height: 18px;
				@media (max-width: 767px){
					content: ' (required)';
					display: inline;
				}
			}
		}

		#paymethhider > table > tbody > tr:first-child + tr + tr{
			.smalltext{ color: black; }
		}

		// CSC row
		#paymethhider > table > tbody > tr:first-child + tr + tr + tr + tr + tr + tr + tr + tr > td:first-child + td{
			input{
				float: left;
			}

			// Our own CSC example image
			&:after{
				content : 'Example Image';
				width: 190px;
				height: 115px;
				outline: 1px solid blue;
				display: block;
				margin-left: 5px;
				float: left;
			}
		}
		
		#paymethhider > table > tbody > tr:first-child + tr + tr + tr + tr + tr + tr + tr + tr + tr + tr > td:first-child + td{
			padding-left: 62px !important;
			clear: both;
			@include box-sizing();
		}
		
		// Save My Credit Card Information
		#paymethhider input[name="sValidFromYr"] + tr{
			&:before{
				display: table-cell;
				content: ' ';
			}
			td{
				padding-top: 10px !important;
			}
		}

		// Gift Card Title
		#paymethhider input[name="sValidFromYr"] + tr + tr + tr{
			.greytitle{
				font-size: $h2FontSize;
			}
		}

		// Apply Gift Card row
		#paymethhider input[name="sValidFromYr"] + tr + tr + tr + tr{
			line-height: 0; // &nbsp; fix
			@media (max-width: 767px){
				td{ 
					float: left !important;
					width: auto !important;
				}
			}
		}

		// If you have a gift card... cells
		#paymethhider input[name="sValidFromYr"] + tr + tr + tr + tr + tr td{
			position: relative;
			top: -10px;
			clear: both;
			@media (max-width: 767px){
				&:first-child{ display: none !important; }
			}
		}

		// Continue button container
		> tbody > tr:first-child + tr + tr table{
			float: right;
			width: auto !important;
			position: absolute;
			bottom: -50px;
			right: 0;
		}

		
		// Blank row and netsuite's example CSC image
		#paymethhider > table > tbody > tr:first-child,
		#paymethhider > table > tbody > tr:first-child + tr,
		#paymethhider > table > tbody > tr:first-child + tr + tr + tr + tr + tr + tr + tr,
		#paymethhider > table > tbody > tr:first-child + tr + tr + tr + tr + tr + tr + tr + tr + tr,
		#paymethhider > table > tbody > tr:first-child + tr + tr + tr + tr + tr + tr + tr + tr + tr + tr + tr{
			display: none !important;
		}
	}

	#main_form{
		font-size: inherit !important;
		padding-bottom: 0 !important;
		width: 100% !important;
	}


	// Shipping

	.portletHandle:first-child + tr + tr + tr + tr.portletHandle{
		width: 100%;
		@include panel();
		@include engaged();
		.checkboximage{ display: none; }
		td:first-child input[type="checkbox"]{
			float:right;
			@media (max-width: 767px){
				float: left;
			}
		}
		#main_form > table > tbody > tr:first-child + tr + tr > td{
			
			padding-bottom: 0 !important;

			// Button
			table{
				//background-color: red;
				margin-right: 0;
				float: right;
				position: absolute;
				bottom: -50px;
				right: 0;
			}
		}

		#main_form > table > tbody > tr:first-child + tr > td > table > tbody > tr > td > table > tbody > tr:first-child + tr + tr + tr + tr + tr{
			display: none !important;
		}

	}

	// Shipping Method
	> tbody > tr:first-child + tr > td[colspan="2"][valign="top"] > table:first-child > tbody > tr:first-child > td > table{
		@include panel();
		@include engaged();

		br{ display: none !important; }

		// Shipping Method Label
		.smalltext b{
			display: none !important;
		}

		// Carrier
		#shippingmethodtable > tbody > tr:first-child + tr{
			> td > table > tbody > tr:first-child td{
				// The label isn't wrapped in an element, so we need to 
				// apply label styling and back out of them for children
				font-weight: bold;
				color: black;
				padding-left: 8px;
				font-size: 0;

				&:before{
					font-size: 14px;
					content: 'Shipping Carrier';
					position: relative;
					top: -9px;
				}
				&:after{
					color: $grey;
					font-weight: normal;
					font-size: 13px;
					width: 100%;
					display: block;
					line-height: 18px;
					text-align:right;
					content: 'Select UPS for Overnight or Second Day Air Options';
					padding-left: 128px;
					text-align: left;
					padding-bottom: 20px;
				}
				#shippingcarrierselect{
					width: 100px;
					display: inline-block;
					margin-left: 10px;
					position: relative;
					top: -3px;
				}
			}
			> td > table > tbody > tr:first-child + tr > td{
				
				padding-left: 138px;
				position: relative;

				&:before{
					content: 'Shipping Method';
					position: absolute;
					left: 13px;
					color: black;
					font-weight: bold;
				}
			}
		}

		> tbody > tr:first-child + tr + tr > td > table:first-child + table > tbody{
			
			.smalltextnolink{ 
				line-height: 18px;
			}

			> tr:first-child + tr > td{
				padding-top: 20px;
			}

			> tr:first-child + tr > td:first-child{
				width: 131px;
			}

			> tr:first-child + tr > td:first-child + td{
				line-height: 0; // &nbsp; fix
				padding-bottom: 0 !important;
			}

			> tr:first-child{
				display: none !important;
			}
		}
		
		// Blank row
		> tbody > tr:first-child + tr{
			display: none !important;
		}

	}

	// Button Bar
	> tbody > tr:first-child + tr > td[colspan="2"][valign="top"] > table:first-child > tbody > tr:first-child + tr{
		table{ 
			float: right;
			position: relative;
			top: -5px;
		}
	}

}
